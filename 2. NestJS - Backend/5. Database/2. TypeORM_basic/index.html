
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="DESCRIPTION">
      
      
        <meta name="author" content="ihsanabuhanifah">
      
      
      
        <link rel="prev" href="../1.%20database_fund/">
      
      
        <link rel="next" href="../../6.%20Project/1.%20Project%20_Overview/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.1, mkdocs-material-9.1.21">
    
    
      
        <title>B. TypeORM Basic CRUD - FULLSTACK DEVELOPMENT - SMK MADINATULQURAN</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.eebd395e.min.css">
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.5 1.75v11.5c0 .138.112.25.25.25h3.17a.75.75 0 0 1 0 1.5H2.75A1.75 1.75 0 0 1 1 13.25V1.75C1 .784 1.784 0 2.75 0h8.5C12.216 0 13 .784 13 1.75v7.736a.75.75 0 0 1-1.5 0V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13.274 9.537v-.001l-4.557 4.45a.75.75 0 0 1-1.055-.008l-1.943-1.95a.75.75 0 0 1 1.062-1.058l1.419 1.425 4.026-3.932a.75.75 0 1 1 1.048 1.074ZM4.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75Z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3.499.75a.75.75 0 0 1 1.5 0v.996C5.9 2.903 6.793 3.65 7.662 4.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873 10.794-.045 12.622.26 14.408.558 16 1.94 16 4.25c0 1.278-.954 2.575-2.44 2.734l.146.508.065.22c.203.701.412 1.455.476 2.226.142 1.707-.4 3.03-1.487 3.898C11.714 14.671 10.27 15 8.75 15h-6a.75.75 0 0 1 0-1.5h1.376a4.484 4.484 0 0 1-.563-1.191 3.835 3.835 0 0 1-.05-2.063 4.647 4.647 0 0 1-2.025-.293.75.75 0 0 1 .525-1.406c1.357.507 2.376-.006 2.698-.318l.009-.01a.747.747 0 0 1 1.06 0 .748.748 0 0 1-.012 1.074c-.912.92-.992 1.835-.768 2.586.221.74.745 1.337 1.196 1.621H8.75c1.343 0 2.398-.296 3.074-.836.635-.507 1.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.425 2.425 0 0 1-.507-.441 3.075 3.075 0 0 1-.633-1.248.75.75 0 0 1 1.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738 0 1.25-.615 1.25-1.25 0-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706 1.345-.46.92-.27 1.774.019 3.062l.042.19a.884.884 0 0 1 .01.05c.348.443.666.949.94 1.553a.75.75 0 1 1-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7 5.527c-.814-.68-1.75-1.462-2.692-2.619a3.737 3.737 0 0 0-1.023.88c-.406.495-.663 1.036-.722 1.508.116.122.306.21.591.239.388.038.797-.06 1.032-.19a.75.75 0 0 1 .728 1.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75 5.677V5.5c0-.984.48-1.94 1.077-2.664.46-.559 1.05-1.055 1.673-1.353V.75Z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.92 6.085h.001a.749.749 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.756 2.756 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6.24 6.24 0 0 0-.26.16.952.952 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661.103-.067.207-.132.313-.195l.007-.004c.1-.061.182-.11.258-.161a.969.969 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.612.612 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187a1.01 1.01 0 0 0-.34.398ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.344 2.343h-.001a8 8 0 0 1 11.314 11.314A8.002 8.002 0 0 1 .234 10.089a8 8 0 0 1 2.11-7.746Zm1.06 10.253a6.5 6.5 0 1 0 9.108-9.275 6.5 6.5 0 0 0-9.108 9.275ZM6.03 4.97 8 6.94l1.97-1.97a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l1.97 1.97a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-1.97 1.97a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L6.94 8 4.97 6.03a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018Z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.249 1.249 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004L9.503.429Zm1.047 1.074L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006a.036.036 0 0 0-.004-.009l-.006-.006-.008-.001c-.003 0-.006.002-.009.004Z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.488 3.488 0 0 1 2.441 0l.999-1a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.775.776c.616.63.995 1.493.995 2.444v.327c0 .1-.009.197-.025.292.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5c0 .409-.049.806-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A4.997 4.997 0 0 1 8 16a4.997 4.997 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5.036 5.036 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.677 1.677 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06Zm.53 6.28a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75ZM6.173 5h3.654A.172.172 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173Z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458Zm-2.4 6.565a.75.75 0 0 0 .633 1.153h9.534a.75.75 0 0 0 .633-1.153L12.225 10.5h-8.45ZM9.5 2.5h-3V6c0 .143-.04.283-.117.403L4.73 9h6.54L9.617 6.403A.746.746 0 0 1 9.5 6Z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1.75 2.5h10.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5Zm4 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5ZM2.5 7.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0Z"/></svg>');}</style>


    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#b-typeorm-basic-crud" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="FULLSTACK DEVELOPMENT - SMK MADINATULQURAN" class="md-header__button md-logo" aria-label="FULLSTACK DEVELOPMENT - SMK MADINATULQURAN" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FULLSTACK DEVELOPMENT - SMK MADINATULQURAN
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              B. TypeORM Basic CRUD
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="FULLSTACK DEVELOPMENT - SMK MADINATULQURAN" class="md-nav__button md-logo" aria-label="FULLSTACK DEVELOPMENT - SMK MADINATULQURAN" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    FULLSTACK DEVELOPMENT - SMK MADINATULQURAN
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          1. TypeScript
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          1. TypeScript
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1.%20TypeScript/1.%20Setup/" class="md-nav__link">
        1. Setup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          2. NestJS   Backend
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          2. NestJS   Backend
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1.%20Instalasi/" class="md-nav__link">
        1. Instalasi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../2.%20Struktur/" class="md-nav__link">
        2. Struktur NestJS
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
          3. Fundamental
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          3. Fundamental
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../3.%20Fundamental/1.%20module/" class="md-nav__link">
        A. NestJs Module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../3.%20Fundamental/2.%20controller/" class="md-nav__link">
        B. NestJs Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../3.%20Fundamental/3.%20provider/" class="md-nav__link">
        C. NestJs Provider
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
      
      
      
        <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
          4. Rest API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          4. Rest API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../4.%20Rest%20API/1.%20membuat_api/" class="md-nav__link">
        A. Membuat REST API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../4.%20Rest%20API/2.dto_response/" class="md-nav__link">
        B. DTO dan Response Type
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../4.%20Rest%20API/3.%20validation/" class="md-nav__link">
        C. Validation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
          5. Database
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          5. Database
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1.%20database_fund/" class="md-nav__link">
        A. Pengenalan Database
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          B. TypeORM Basic CRUD
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        B. TypeORM Basic CRUD
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-typeorm-config" class="md-nav__link">
    1. TypeOrm Config
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-import-typeormconfig-pada-app-module" class="md-nav__link">
    2. Import TypeOrmConfig pada app module
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-membuat-book-entity" class="md-nav__link">
    3. Membuat Book Entity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-menggunakan-book-entity-pada-bookservice" class="md-nav__link">
    4. Menggunakan Book Entity pada BookService
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-menambahkan-book-ke-tabel-dengan-typeorm" class="md-nav__link">
    5. Menambahkan Book ke Tabel dengan TypeOrm
  </a>
  
    <nav class="md-nav" aria-label="5. Menambahkan Book ke Tabel dengan TypeOrm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-pengujian-pada-create" class="md-nav__link">
    -  Pengujian pada create
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-menampilkan-data-book-dengan-typeorm" class="md-nav__link">
    6. Menampilkan data Book dengan TypeOrm
  </a>
  
    <nav class="md-nav" aria-label="6. Menampilkan data Book dengan TypeOrm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-pengujian-pada-postman" class="md-nav__link">
    - Pengujian pada Postman
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-menampilkan-detail-book-dengan-typeorm" class="md-nav__link">
    7. Menampilkan detail book dengan TypeOrm
  </a>
  
    <nav class="md-nav" aria-label="7. Menampilkan detail book dengan TypeOrm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-pengujian-pada-postman_1" class="md-nav__link">
    - Pengujian pada Postman
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-mengupdate-book-dengan-typeorm" class="md-nav__link">
    8. Mengupdate book dengan TypeOrm
  </a>
  
    <nav class="md-nav" aria-label="8. Mengupdate book dengan TypeOrm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-pengujian-pada-update" class="md-nav__link">
    - Pengujian pada Update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-pengujian-pada-after-update" class="md-nav__link">
    - Pengujian pada after update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-menghapus-book-dengan-typeorm" class="md-nav__link">
    9. Menghapus book dengan TypeOrm
  </a>
  
    <nav class="md-nav" aria-label="9. Menghapus book dengan TypeOrm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-pengujian-pada-delete" class="md-nav__link">
    - Pengujian pada Delete
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-memambahkan-banyak-buku-ke-table-dengan-typeorm" class="md-nav__link">
    10. Memambahkan Banyak Buku ke table dengan TypeOrm
  </a>
  
    <nav class="md-nav" aria-label="10. Memambahkan Banyak Buku ke table dengan TypeOrm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-pengujian-pada-postman_2" class="md-nav__link">
    - Pengujian pada Postman
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-membuat-paginationpaging-pada-menampilan-semua-data" class="md-nav__link">
    11. Membuat Pagination(Paging) pada menampilan semua data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-implementasi-custom-decorator-untuk-meyederhanakan-paging" class="md-nav__link">
    12. Implementasi Custom Decorator untuk meyederhanakan Paging
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13-membuat-filter-page-getallbook" class="md-nav__link">
    13. Membuat Filter page getAllBook
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#14-membuat-base-response" class="md-nav__link">
    14. Membuat Base Response
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
      
      
      
        <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
          6. Project
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          6. Project
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6.%20Project/1.%20Project%20_Overview/" class="md-nav__link">
        1. Project  Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_6_2" id="__nav_3_6_2_label" tabindex="0">
          2. Authentication
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_6_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_6_2">
          <span class="md-nav__icon md-icon"></span>
          2. Authentication
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6.%20Project/2.%20Authentication/1.%20register_login/" class="md-nav__link">
        A. Login dan Register
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6.%20Project/2.%20Authentication/2.%20jwt_token/" class="md-nav__link">
        B. JSON Web Token (JWT) dan Guard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6.%20Project/2.%20Authentication/3.%20lupa_password/" class="md-nav__link">
        C. Fitur Lupa Password
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6.%20Project/2.%20Authentication/4.%20reset_password/" class="md-nav__link">
        D.  Fitur Reset Password
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3_6_3" id="__nav_3_6_3_label" tabindex="0">
          3. Konfigurasi
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_6_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_6_3">
          <span class="md-nav__icon md-icon"></span>
          3. Konfigurasi
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6.%20Project/3.%20Konfigurasi/3.%20Konfigurasi/" class="md-nav__link">
        A. Global Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6_4" >
      
      
      
        <label class="md-nav__link" for="__nav_3_6_4" id="__nav_3_6_4_label" tabindex="0">
          4. Fitur Kategori
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_6_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_6_4">
          <span class="md-nav__icon md-icon"></span>
          4. Fitur Kategori
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6.%20Project/4.%20Fitur%20Kategori/" class="md-nav__link">
        A. CRUD Kategori
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          3. NextJS   Frontend
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          3. NextJS   Frontend
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../3.%20NextJS%20-%20Frontend/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-typeorm-config" class="md-nav__link">
    1. TypeOrm Config
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-import-typeormconfig-pada-app-module" class="md-nav__link">
    2. Import TypeOrmConfig pada app module
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-membuat-book-entity" class="md-nav__link">
    3. Membuat Book Entity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-menggunakan-book-entity-pada-bookservice" class="md-nav__link">
    4. Menggunakan Book Entity pada BookService
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-menambahkan-book-ke-tabel-dengan-typeorm" class="md-nav__link">
    5. Menambahkan Book ke Tabel dengan TypeOrm
  </a>
  
    <nav class="md-nav" aria-label="5. Menambahkan Book ke Tabel dengan TypeOrm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-pengujian-pada-create" class="md-nav__link">
    -  Pengujian pada create
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-menampilkan-data-book-dengan-typeorm" class="md-nav__link">
    6. Menampilkan data Book dengan TypeOrm
  </a>
  
    <nav class="md-nav" aria-label="6. Menampilkan data Book dengan TypeOrm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-pengujian-pada-postman" class="md-nav__link">
    - Pengujian pada Postman
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-menampilkan-detail-book-dengan-typeorm" class="md-nav__link">
    7. Menampilkan detail book dengan TypeOrm
  </a>
  
    <nav class="md-nav" aria-label="7. Menampilkan detail book dengan TypeOrm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-pengujian-pada-postman_1" class="md-nav__link">
    - Pengujian pada Postman
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-mengupdate-book-dengan-typeorm" class="md-nav__link">
    8. Mengupdate book dengan TypeOrm
  </a>
  
    <nav class="md-nav" aria-label="8. Mengupdate book dengan TypeOrm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-pengujian-pada-update" class="md-nav__link">
    - Pengujian pada Update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-pengujian-pada-after-update" class="md-nav__link">
    - Pengujian pada after update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-menghapus-book-dengan-typeorm" class="md-nav__link">
    9. Menghapus book dengan TypeOrm
  </a>
  
    <nav class="md-nav" aria-label="9. Menghapus book dengan TypeOrm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-pengujian-pada-delete" class="md-nav__link">
    - Pengujian pada Delete
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-memambahkan-banyak-buku-ke-table-dengan-typeorm" class="md-nav__link">
    10. Memambahkan Banyak Buku ke table dengan TypeOrm
  </a>
  
    <nav class="md-nav" aria-label="10. Memambahkan Banyak Buku ke table dengan TypeOrm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-pengujian-pada-postman_2" class="md-nav__link">
    - Pengujian pada Postman
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-membuat-paginationpaging-pada-menampilan-semua-data" class="md-nav__link">
    11. Membuat Pagination(Paging) pada menampilan semua data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-implementasi-custom-decorator-untuk-meyederhanakan-paging" class="md-nav__link">
    12. Implementasi Custom Decorator untuk meyederhanakan Paging
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13-membuat-filter-page-getallbook" class="md-nav__link">
    13. Membuat Filter page getAllBook
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#14-membuat-base-response" class="md-nav__link">
    14. Membuat Base Response
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="b-typeorm-basic-crud">B. TypeORM Basic CRUD</h1>
<p>TypeORM merupakan ORM (Object Relational Mapping yang dapat berjalan pada NodeJS). Selain TypeOrm , ORM lain yang bisa digunakan pada nestjs adalah <code>sequelize</code>, <code>prisma</code> , <code>knex</code> dan lain-lain.
untuk memulai menggukan TypeORM pada nestjs kita instalasi terlebih dahulu</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">npm</span> <span class="n">install</span> <span class="o">--</span><span class="n">save</span> <span class="nd">@nestjs</span><span class="o">/</span><span class="n">typeorm</span> <span class="n">typeorm</span> <span class="n">mysql2</span>
</span></code></pre></div>
<p>Kemudian kita akan membuat file baru untuk menyimpan konfigurasi TypeOrm di aplikasi kita</p>
<h3 id="1-typeorm-config"><strong>1. TypeOrm Config</strong></h3>
<p>Buatlah folder config pada folder src , kemudian buatlah file typeorm.config.ts</p>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=1BVG0x3xGYBBEQPaW9kZKDVHCJHfl4AjE" /></p>
<p><strong>typeorm.config.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">TypeOrmModuleOptions</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;@nestjs/typeorm&quot;</span><span class="p">;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">export</span> <span class="n">const</span> <span class="n">typeOrmConfig</span><span class="p">:</span> <span class="n">TypeOrmModuleOptions</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>  <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;mysql&quot;</span><span class="p">,</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>  <span class="n">host</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>  <span class="n">port</span><span class="p">:</span> <span class="mi">3307</span><span class="p">,</span> <span class="o">//</span><span class="n">port</span> <span class="n">default</span> <span class="mi">3306</span> <span class="n">lihat</span> <span class="n">xampp</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>  <span class="n">username</span><span class="p">:</span> <span class="s2">&quot;root&quot;</span><span class="p">,</span> <span class="o">//</span> <span class="n">username</span> <span class="n">default</span> <span class="n">xampp</span> <span class="n">root</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>  <span class="n">password</span><span class="p">:</span> <span class="s2">&quot;root&quot;</span><span class="p">,</span> <span class="o">//</span> <span class="n">password</span> <span class="n">default</span> <span class="n">xampp</span> <span class="n">string</span> <span class="n">kosong</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>  <span class="n">database</span><span class="p">:</span> <span class="s2">&quot;belajar_nest_js&quot;</span><span class="p">,</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>  <span class="n">entities</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;dist/**/*.entity{.ts,.js}&quot;</span><span class="p">],</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>  <span class="n">synchronize</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="p">};</span>
</span></code></pre></div>
<h3 id="2-import-typeormconfig-pada-app-module"><strong>2. Import TypeOrmConfig pada app module</strong></h3>
<p>import module TypeOrm pada app.module.ts agar typeorm bisa digunakan pada aplikasi kita.</p>
<p><strong>app.module.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">Module</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;@nestjs/common&quot;</span><span class="p">;</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">AppController</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;./app.controller&quot;</span><span class="p">;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">AppService</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;./app.service&quot;</span><span class="p">;</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">LatihanModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;./latihan/latihan.module&quot;</span><span class="p">;</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">BookModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;./book/book.module&quot;</span><span class="p">;</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">TypeOrmModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;@nestjs/typeorm&quot;</span><span class="p">;</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">typeOrmConfig</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;./config/typeorm.config&quot;</span><span class="p">;</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="nd">@Module</span><span class="p">({</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>  <span class="n">imports</span><span class="p">:</span> <span class="p">[</span><span class="n">TypeOrmModule</span><span class="o">.</span><span class="n">forRoot</span><span class="p">(</span><span class="n">typeOrmConfig</span><span class="p">),</span> <span class="n">LatihanModule</span><span class="p">,</span> <span class="n">BookModule</span><span class="p">],</span> 
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>  <span class="n">controllers</span><span class="p">:</span> <span class="p">[</span><span class="n">AppController</span><span class="p">],</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>  <span class="n">providers</span><span class="p">:</span> <span class="p">[</span><span class="n">AppService</span><span class="p">],</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="p">})</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">AppModule</span> <span class="p">{}</span>
</span></code></pre></div>
<h3 id="3-membuat-book-entity"><strong>3. Membuat Book Entity</strong></h3>
<p>Kemudian kita akan membuat entity untuk membuat table pada database mysql. </p>
<p>Buatlah file dengan nama <code>book.entity.ts</code> pada folder book, seperti berikut</p>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=1q6RYnxiufoGDrsgmJPpi1KOZmr4oYzuj" /></p>
<p><strong>book.entity.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">Entity</span><span class="p">,</span> <span class="n">BaseEntity</span><span class="p">,</span> <span class="n">PrimaryGeneratedColumn</span><span class="p">,</span> <span class="n">Column</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;typeorm&quot;</span><span class="p">;</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="nd">@Entity</span><span class="p">()</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">Book</span> <span class="n">extends</span> <span class="n">BaseEntity</span> <span class="p">{</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>  <span class="nd">@PrimaryGeneratedColumn</span><span class="p">()</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>  <span class="nb">id</span><span class="p">:</span> <span class="n">number</span><span class="p">;</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>  <span class="nd">@Column</span><span class="p">()</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>  <span class="n">title</span><span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>  <span class="nd">@Column</span><span class="p">()</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>  <span class="n">author</span><span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>  <span class="nd">@Column</span><span class="p">()</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>  <span class="n">year</span><span class="p">:</span> <span class="n">number</span><span class="p">;</span>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>  <span class="nd">@Column</span><span class="p">({</span> <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;datetime&quot;</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="s2">&quot;CURRENT_TIMESTAMP&quot;</span> <span class="p">})</span>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>  <span class="n">created_at</span><span class="p">:</span> <span class="n">Date</span><span class="p">;</span>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>  <span class="nd">@Column</span><span class="p">({</span> <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;datetime&quot;</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="s2">&quot;CURRENT_TIMESTAMP&quot;</span> <span class="p">})</span>
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>  <span class="n">updated_at</span><span class="p">:</span> <span class="n">Date</span><span class="p">;</span>
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="p">}</span>
</span></code></pre></div>
<p>Kemudian kita import entity pada book.module.ts</p>
<p><strong>book.module.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">Module</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;@nestjs/common&quot;</span><span class="p">;</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">BookService</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;./book.service&quot;</span><span class="p">;</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">BookController</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;./book.controller&quot;</span><span class="p">;</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">TypeOrmModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;@nestjs/typeorm&quot;</span><span class="p">;</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">Book</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;./book.entity&quot;</span><span class="p">;</span> <span class="o">//</span><span class="kn">import</span> <span class="nn">dari</span> <span class="n">book</span><span class="o">.</span><span class="n">entity</span><span class="o">.</span><span class="n">ts</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="nd">@Module</span><span class="p">({</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>  <span class="n">imports</span><span class="p">:</span> <span class="p">[</span><span class="n">TypeOrmModule</span><span class="o">.</span><span class="n">forFeature</span><span class="p">([</span><span class="n">Book</span><span class="p">])],</span> <span class="o">//</span> <span class="kn">import</span> <span class="nn">dengan</span> <span class="n">TypeOrm</span> <span class="n">For</span> <span class="n">Feature</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>  <span class="n">providers</span><span class="p">:</span> <span class="p">[</span><span class="n">BookService</span><span class="p">],</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>  <span class="n">controllers</span><span class="p">:</span> <span class="p">[</span><span class="n">BookController</span><span class="p">],</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="p">})</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">BookModule</span> <span class="p">{}</span>
</span></code></pre></div>
<p>Kemudian kita lihat apakah tabel sudah terbuat atau tidak pada database</p>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=1cttEGwFhcKfxce06a83xwX6fUDPPq7rV" /></p>
<p>Pada gambar tersebut terlihat kalau tabel sudah terbuat secara otomatis pada database, jika kita mengalami kendala tabel tidak terbuat, silahkan cek kembali langkah-langkah di atas.</p>
<h3 id="4-menggunakan-book-entity-pada-bookservice"><strong>4. Menggunakan Book Entity pada BookService</strong></h3>
<p>Ketika kita sudah menggukana forFeature() pada module, selanjutnya kita akan menginject BookRepository ke dalam BookService dengan menggunakan @InjectRepository() decorator</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">Injectable</span><span class="p">,</span> <span class="n">NotFoundException</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@nestjs/common&#39;</span><span class="p">;</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">ResponseSuccess</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/interface/response&#39;</span><span class="p">;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">CreateBookDto</span><span class="p">,</span> <span class="n">UpdateBookDto</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./book.dto&#39;</span><span class="p">;</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">InjectRepository</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@nestjs/typeorm&#39;</span><span class="p">;</span> <span class="o">//</span> <span class="kn">import</span> <span class="nn">injectReposity</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">Book</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./book.entity&#39;</span><span class="p">;</span> <span class="o">//</span> <span class="kn">import</span> <span class="nn">Book</span> <span class="n">Entiy</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">Repository</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;typeorm&#39;</span><span class="p">;</span> <span class="kn">import</span> <span class="o">//</span><span class="kn">import</span> <span class="nn">repository</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="nd">@Injectable</span><span class="p">()</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">BookService</span> <span class="p">{</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>  <span class="o">//</span><span class="n">inject</span> <span class="n">book</span> <span class="n">repository</span> <span class="n">ke</span> <span class="n">service</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>  <span class="n">constructor</span><span class="p">(</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>    <span class="nd">@InjectRepository</span><span class="p">(</span><span class="n">Book</span><span class="p">)</span> <span class="n">private</span> <span class="n">readonly</span> <span class="n">bookRepository</span><span class="p">:</span> <span class="n">Repository</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>  <span class="p">)</span> <span class="p">{}</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>   <span class="o">//</span><span class="n">inject</span> <span class="n">book</span> <span class="n">repository</span> <span class="n">ke</span> <span class="n">service</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>  <span class="n">private</span> <span class="n">books</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>    <span class="nb">id</span><span class="err">?</span><span class="p">:</span> <span class="n">number</span><span class="p">;</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a>    <span class="n">year</span><span class="p">:</span> <span class="n">number</span><span class="p">;</span>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a>  <span class="p">}[]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>    <span class="p">{</span>
</span><span id="__span-5-25"><a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a>      <span class="nb">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="__span-5-26"><a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a>      <span class="n">title</span><span class="p">:</span> <span class="s1">&#39;HTML CSS&#39;</span><span class="p">,</span>
</span><span id="__span-5-27"><a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a>      <span class="n">author</span><span class="p">:</span> <span class="s1">&#39;ihsanabuhanifah&#39;</span><span class="p">,</span>
</span><span id="__span-5-28"><a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a>      <span class="n">year</span><span class="p">:</span> <span class="mi">2023</span><span class="p">,</span>
</span><span id="__span-5-29"><a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a>    <span class="p">},</span>
</span><span id="__span-5-30"><a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a>  <span class="p">];</span>
</span><span id="__span-5-31"><a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a>
</span><span id="__span-5-32"><a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a>  <span class="n">getAllBooks</span><span class="p">():</span> <span class="n">ResponseSuccess</span> <span class="p">{</span>
</span><span id="__span-5-33"><a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-5-34"><a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a>      <span class="n">status</span><span class="p">:</span> <span class="s1">&#39;Success&#39;</span><span class="p">,</span>
</span><span id="__span-5-35"><a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a>      <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;List Buku ditermukan&#39;</span><span class="p">,</span>
</span><span id="__span-5-36"><a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a>      <span class="n">data</span><span class="p">:</span> <span class="n">this</span><span class="o">.</span><span class="n">books</span><span class="p">,</span>
</span><span id="__span-5-37"><a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a>    <span class="p">};</span>
</span><span id="__span-5-38"><a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a>  <span class="p">}</span>
</span><span id="__span-5-39"><a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a>
</span><span id="__span-5-40"><a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a>
</span><span id="__span-5-41"><a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="5-menambahkan-book-ke-tabel-dengan-typeorm"><strong>5. Menambahkan Book ke Tabel dengan TypeOrm</strong></h3>
<p>Pada materi ini , kita akan berlatih menambahkan data ke tabel book pada database mengguankan method <code>save()</code> dari TypeOrm</p>
<p>Perhatikan method createBook pada bookService, sebelumnya kita menggunakan database semetera pada array book seperti koding di bawah</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">createBook</span><span class="p">(</span><span class="n">createBookDto</span><span class="p">:</span> <span class="n">CreateBookDto</span><span class="p">):</span> <span class="n">ResponseSuccess</span> <span class="p">{</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>    <span class="n">const</span> <span class="p">{</span> <span class="n">title</span><span class="p">,</span> <span class="n">author</span><span class="p">,</span> <span class="n">year</span> <span class="p">}</span> <span class="o">=</span> <span class="n">createBookDto</span><span class="p">;</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>    <span class="n">this</span><span class="o">.</span><span class="n">books</span><span class="o">.</span><span class="n">push</span><span class="p">({</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>      <span class="nb">id</span><span class="p">:</span> <span class="n">new</span> <span class="n">Date</span><span class="p">()</span><span class="o">.</span><span class="n">getTime</span><span class="p">(),</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>      <span class="n">title</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>      <span class="n">author</span><span class="p">:</span> <span class="n">author</span><span class="p">,</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>      <span class="n">year</span><span class="p">:</span> <span class="n">year</span><span class="p">,</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    <span class="p">});</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>      <span class="n">status</span><span class="p">:</span> <span class="s1">&#39;Success&#39;</span><span class="p">,</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>      <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;Berhasil menambakan buku&#39;</span><span class="p">,</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>    <span class="p">};</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>  <span class="p">}</span>
</span></code></pre></div>
<p>selanjutnya kita kan ubah tempat menyimpan data ke dalam database dan menampilkannya , maka seperti koding di bawah ini</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kn">import</span> <span class="p">{</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>  <span class="n">HttpException</span><span class="p">,</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>  <span class="n">HttpStatus</span><span class="p">,</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>  <span class="n">Injectable</span><span class="p">,</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>  <span class="n">NotFoundException</span><span class="p">,</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@nestjs/common&#39;</span><span class="p">;</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="o">...</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="k">async</span> <span class="n">createBook</span><span class="p">(</span><span class="n">createBookDto</span><span class="p">:</span> <span class="n">CreateBookDto</span><span class="p">):</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">ResponseSuccess</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>    <span class="n">const</span> <span class="p">{</span> <span class="n">title</span><span class="p">,</span> <span class="n">author</span><span class="p">,</span> <span class="n">year</span> <span class="p">}</span> <span class="o">=</span> <span class="n">createBookDto</span><span class="p">;</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>    <span class="k">try</span> <span class="p">{</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>      <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">save</span><span class="p">({</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>        <span class="n">title</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>        <span class="n">author</span><span class="p">:</span> <span class="n">author</span><span class="p">,</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>        <span class="n">year</span><span class="p">:</span> <span class="n">year</span><span class="p">,</span>
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>      <span class="p">});</span>
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>      <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>        <span class="n">status</span><span class="p">:</span> <span class="s1">&#39;Success&#39;</span><span class="p">,</span>
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>        <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;Berhasil menambakan buku&#39;</span><span class="p">,</span>
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>      <span class="p">};</span>
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>    <span class="p">}</span> <span class="n">catch</span> <span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>      <span class="n">throw</span> <span class="n">new</span> <span class="n">HttpException</span><span class="p">(</span><span class="s1">&#39;Ada Kesalahan&#39;</span><span class="p">,</span> <span class="n">HttpStatus</span><span class="o">.</span><span class="n">BAD_REQUEST</span><span class="p">);</span>
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>    <span class="p">}</span>
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>  <span class="p">}</span>
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>
</span><span id="__span-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a><span class="o">...</span>
</span></code></pre></div>
<p>Pada kode diatas, kita ubah method <code>createBook</code> menjadi <code>asynchronous</code> karena saat proses penyimpanan data akan ada jeda waktu menunggu sampai ada response, ntuk menjadikan <code>asyncronous</code> kita cukup memberika keyword <strong>async</strong>.</p>
<p>Selanjutnya kita bikin kondisi jika penyimpanan gagal maka akan menampilkan pesan kesalahan "Ada Kesalahan" dengan kode 400.</p>
<h4 id="-pengujian-pada-create">-  Pengujian pada create</h4>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=1JTeh5TMkWorpqSklb4rfi2pK2XkfIVcj" /></p>
<p>Kita cek apakah data berhasil masuk atau belum ke database</p>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=15W3Vwlh564tW4BXj-4h_AtJrrqt3L8mo" /></p>
<h3 id="6-menampilkan-data-book-dengan-typeorm"><strong>6. Menampilkan data Book dengan TypeOrm</strong></h3>
<p>Pada materi ini kita akan menampilkan data dengan method find() pada typeOrm.</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">async</span> <span class="n">getAllBooks</span><span class="p">():</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">ResponseSuccess</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>    <span class="n">const</span> <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">find</span><span class="p">();</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>      <span class="n">status</span><span class="p">:</span> <span class="s1">&#39;Success&#39;</span><span class="p">,</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>      <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;List Buku ditermukan&#39;</span><span class="p">,</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>      <span class="n">data</span><span class="p">:</span> <span class="n">result</span><span class="p">,</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>    <span class="p">};</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>  <span class="p">}</span>
</span></code></pre></div>
<h4 id="-pengujian-pada-postman">- Pengujian pada Postman</h4>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=1zW4WKoLL1_FmsPP7dfl5XuT5lsHHEV4i" /></p>
<h3 id="7-menampilkan-detail-book-dengan-typeorm"><strong>7. Menampilkan detail book dengan TypeOrm</strong></h3>
<div class="language-py highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="o">...</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="k">async</span> <span class="n">getDetail</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="n">number</span><span class="p">):</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">ResponseSuccess</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>    <span class="n">const</span> <span class="n">detailBook</span> <span class="o">=</span> <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">findOne</span><span class="p">({</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>      <span class="n">where</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>        <span class="nb">id</span><span class="p">,</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>      <span class="p">},</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>    <span class="p">});</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">detailBook</span> <span class="o">===</span> <span class="n">null</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>      <span class="n">throw</span> <span class="n">new</span> <span class="n">NotFoundException</span><span class="p">(</span><span class="err">`</span><span class="n">Buku</span> <span class="n">dengan</span> <span class="nb">id</span> <span class="err">$</span><span class="p">{</span><span class="nb">id</span><span class="p">}</span> <span class="n">tidak</span> <span class="n">ditemukan</span><span class="err">`</span><span class="p">);</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>    <span class="p">}</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>      <span class="n">status</span><span class="p">:</span> <span class="s1">&#39;Success&#39;</span><span class="p">,</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>      <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;Detail Buku ditermukan&#39;</span><span class="p">,</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>      <span class="n">data</span><span class="p">:</span> <span class="n">detailBook</span><span class="p">,</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>    <span class="p">};</span>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>  <span class="p">}</span>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="o">...</span>
</span></code></pre></div>
<h4 id="-pengujian-pada-postman_1">- Pengujian pada Postman</h4>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=1EstekUKflhBlgCNnCWyEaTwmClutZS_-" /></p>
<h3 id="8-mengupdate-book-dengan-typeorm"><strong>8. Mengupdate book dengan TypeOrm</strong></h3>
<div class="language-py highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">async</span> <span class="n">updateBook</span><span class="p">(</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    <span class="nb">id</span><span class="p">:</span> <span class="n">number</span><span class="p">,</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    <span class="n">updateBookDto</span><span class="p">:</span> <span class="n">UpdateBookDto</span><span class="p">,</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>  <span class="p">):</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">ResponseSuccess</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>    <span class="n">const</span> <span class="n">check</span> <span class="o">=</span> <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">findOne</span><span class="p">({</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>      <span class="n">where</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>        <span class="nb">id</span><span class="p">,</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>      <span class="p">},</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>    <span class="p">});</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>    <span class="k">if</span> <span class="p">(</span><span class="err">!</span><span class="n">check</span><span class="p">)</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>      <span class="n">throw</span> <span class="n">new</span> <span class="n">NotFoundException</span><span class="p">(</span><span class="err">`</span><span class="n">Buku</span> <span class="n">dengan</span> <span class="nb">id</span> <span class="err">$</span><span class="p">{</span><span class="nb">id</span><span class="p">}</span> <span class="n">tidak</span> <span class="n">ditemukan</span><span class="err">`</span><span class="p">);</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>    <span class="n">const</span> <span class="n">update</span> <span class="o">=</span> <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">save</span><span class="p">({</span> <span class="o">...</span><span class="n">updateBookDto</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">id</span> <span class="p">});</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>      <span class="n">status</span><span class="p">:</span> <span class="err">`</span><span class="n">Success</span> <span class="err">`</span><span class="p">,</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>      <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;Buku berhasil di update&#39;</span><span class="p">,</span>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>      <span class="n">data</span><span class="p">:</span> <span class="n">update</span><span class="p">,</span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a>    <span class="p">};</span>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>  <span class="p">}</span>
</span></code></pre></div>
<h4 id="-pengujian-pada-update">- Pengujian pada Update</h4>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=1WU2wyzIiZGzt57bF65CdEcfbOVaJJAy4" /></p>
<h4 id="-pengujian-pada-after-update">- Pengujian pada after update</h4>
<p>Setelah proses update berhasil, kita akan cek kembali menggunakan endpoint detail.</p>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=1Ysh6gFEdA9wsBKiCDPoS_cfKpMl6gZoI" /></p>
<p>Pada gambar di atas, kita sudah berhasil merubah data sesuai yang di update</p>
<h3 id="9-menghapus-book-dengan-typeorm"><strong>9. Menghapus book dengan TypeOrm</strong></h3>
<div class="language-py highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">async</span> <span class="n">deleteBook</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="n">number</span><span class="p">):</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">ResponseSuccess</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>    <span class="n">const</span> <span class="n">check</span> <span class="o">=</span> <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">findOne</span><span class="p">({</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>      <span class="n">where</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>        <span class="nb">id</span><span class="p">,</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>      <span class="p">},</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>    <span class="p">});</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>    <span class="k">if</span> <span class="p">(</span><span class="err">!</span><span class="n">check</span><span class="p">)</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>      <span class="n">throw</span> <span class="n">new</span> <span class="n">NotFoundException</span><span class="p">(</span><span class="err">`</span><span class="n">Buku</span> <span class="n">dengan</span> <span class="nb">id</span> <span class="err">$</span><span class="p">{</span><span class="nb">id</span><span class="p">}</span> <span class="n">tidak</span> <span class="n">ditemukan</span><span class="err">`</span><span class="p">);</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>    <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="nb">id</span><span class="p">);</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>      <span class="n">status</span><span class="p">:</span> <span class="err">`</span><span class="n">Success</span> <span class="err">`</span><span class="p">,</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>      <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;Berhasil menghapus buku&#39;</span><span class="p">,</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>    <span class="p">};</span>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>  <span class="p">}</span>
</span></code></pre></div>
<h4 id="-pengujian-pada-delete">- Pengujian pada Delete</h4>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=1xNZOVVfYD7xY6j3XrCJqNkmDZghK6Xi1" /></p>
<h3 id="10-memambahkan-banyak-buku-ke-table-dengan-typeorm"><strong>10. Memambahkan Banyak Buku ke table dengan TypeOrm</strong></h3>
<p><strong>book.service.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="o">...</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="k">async</span> <span class="n">bulkCreate</span><span class="p">(</span><span class="n">payload</span><span class="p">:</span> <span class="n">CreateBookDto</span><span class="p">[]):</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">ResponseSuccess</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>    <span class="k">try</span> <span class="p">{</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>      <span class="n">let</span> <span class="n">berhasil</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>      <span class="n">let</span> <span class="n">gagal</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>      <span class="k">await</span> <span class="n">Promise</span><span class="o">.</span><span class="n">all</span><span class="p">(</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>        <span class="n">payload</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>          <span class="k">try</span> <span class="p">{</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>            <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>            <span class="n">berhasil</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>          <span class="p">}</span> <span class="n">catch</span> <span class="p">{</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>            <span class="n">gagal</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>          <span class="p">}</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>        <span class="p">}),</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>      <span class="p">);</span>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>      <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a>        <span class="n">status</span><span class="p">:</span> <span class="err">`</span><span class="n">Success</span> <span class="err">`</span><span class="p">,</span>
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>        <span class="n">message</span><span class="p">:</span> <span class="err">`</span><span class="n">Berhasil</span> <span class="n">menyimpan</span> <span class="err">$</span><span class="p">{</span><span class="n">berhasil</span><span class="p">}</span> <span class="n">dan</span> <span class="n">gagal</span> <span class="err">$</span><span class="p">{</span><span class="n">gagal</span><span class="p">}</span><span class="err">`</span><span class="p">,</span>
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a>      <span class="p">};</span>
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a>    <span class="p">}</span> <span class="n">catch</span> <span class="p">{</span>
</span><span id="__span-12-24"><a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a>      <span class="n">throw</span> <span class="n">new</span> <span class="n">HttpException</span><span class="p">(</span><span class="s1">&#39;Ada Kesalahan&#39;</span><span class="p">,</span> <span class="n">HttpStatus</span><span class="o">.</span><span class="n">BAD_REQUEST</span><span class="p">);</span>
</span><span id="__span-12-25"><a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a>    <span class="p">}</span>
</span><span id="__span-12-26"><a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a>  <span class="p">}</span>
</span><span id="__span-12-27"><a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a>
</span><span id="__span-12-28"><a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a><span class="o">...</span>
</span></code></pre></div>
<p><strong>book.controller.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nd">@Post</span><span class="p">(</span><span class="s1">&#39;/create/bulk&#39;</span><span class="p">)</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>  <span class="n">bulkCreateBook</span><span class="p">(</span><span class="nd">@Body</span><span class="p">()</span> <span class="n">payload</span><span class="p">:</span> <span class="n">CreateBookDto</span><span class="p">[])</span> <span class="p">{</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>    <span class="k">return</span> <span class="n">this</span><span class="o">.</span><span class="n">bookService</span><span class="o">.</span><span class="n">bulkCreate</span><span class="p">(</span><span class="n">payload</span><span class="p">);</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>  <span class="p">}</span>
</span></code></pre></div>
<h4 id="-pengujian-pada-postman_2">- Pengujian pada Postman</h4>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=1Lb-myYQFY3cpFmYIHx6D7zVienp93sFa" /></p>
<h3 id="11-membuat-paginationpaging-pada-menampilan-semua-data"><strong>11. Membuat Pagination(Paging) pada menampilan semua data</strong></h3>
<p>Ketika membuat REST API untuk menampilkan semua data di tabel, maka kita perlu menggunakan paging agar query di backend tidak terlalu berat dan kita bisa membatasi berapa data yang ditampilkan dalam satu kali query.</p>
<p>Pada materi ini kita akan membahas bagaiaman membuat paging dengan typeorm dan nestjs</p>
<p><strong>Langkah Pertama kita buat dulu response type untuk pagination</strong></p>
<p><strong>src/interface/response/response.interface.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">HttpStatus</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;@nestjs/common&quot;</span><span class="p">;</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="n">export</span> <span class="n">interface</span> <span class="n">ResponseSuccess</span> <span class="p">{</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>  <span class="n">statusCode</span><span class="err">?</span><span class="p">:</span> <span class="n">HttpStatus</span><span class="p">;</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>  <span class="n">status</span><span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>  <span class="n">message</span><span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>  <span class="n">data</span><span class="err">?</span><span class="p">:</span> <span class="nb">any</span><span class="p">;</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="p">}</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="n">export</span> <span class="n">interface</span> <span class="n">ResponsePagination</span> <span class="n">extends</span> <span class="n">ResponseSuccess</span> <span class="p">{</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>  <span class="n">pagination</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>    <span class="n">total</span><span class="p">:</span> <span class="n">number</span><span class="p">;</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>    <span class="n">page</span><span class="p">:</span> <span class="n">number</span><span class="p">;</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>    <span class="n">pageSize</span><span class="p">:</span> <span class="n">number</span><span class="p">;</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>  <span class="p">};</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="p">}</span>
</span></code></pre></div>
<p>Jadi ketika pagination kita wajibkan return memiliki object pagination denga property total data, page saat ini dan berapa data yang ditampilkan (pageSize)</p>
<p><strong>Langkah Kedua kita buat dto untuk pagination , dengan membuat folder baru utils/dto</strong></p>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=1al2gu3-P7_jr9P74mTvZOZSn78DsKHEq" /></p>
<p><strong>src/utils/dto/page.dto.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">Type</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;class-transformer&quot;</span><span class="p">;</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">IsInt</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;class-validator&quot;</span><span class="p">;</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">PageRequestDto</span> <span class="p">{</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>  <span class="nd">@IsInt</span><span class="p">()</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>  <span class="nd">@Type</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="n">Number</span><span class="p">)</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>  <span class="n">page</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>  <span class="nd">@IsInt</span><span class="p">()</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>  <span class="nd">@Type</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="n">Number</span><span class="p">)</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>  <span class="n">pageSize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Langkah Ketiga kita buat dto findBookDto di book.dto.ts dengan mengextends PageRequestDto</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">OmitType</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;@nestjs/mapped-types&quot;</span><span class="p">;</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">IsInt</span><span class="p">,</span> <span class="n">IsNotEmpty</span><span class="p">,</span> <span class="n">Min</span><span class="p">,</span> <span class="n">Max</span><span class="p">,</span> <span class="n">Length</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;class-validator&quot;</span><span class="p">;</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">PageRequestDto</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;src/utils/dto/page.dto&quot;</span><span class="p">;</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">BookDto</span> <span class="p">{</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>  <span class="nb">id</span><span class="p">:</span> <span class="n">number</span><span class="p">;</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>  <span class="nd">@IsNotEmpty</span><span class="p">()</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>  <span class="nd">@Length</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>  <span class="n">title</span><span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>  <span class="nd">@IsNotEmpty</span><span class="p">()</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>  <span class="n">author</span><span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>  <span class="nd">@IsInt</span><span class="p">()</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>  <span class="nd">@Min</span><span class="p">(</span><span class="mi">2020</span><span class="p">)</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>  <span class="nd">@Max</span><span class="p">(</span><span class="mi">2023</span><span class="p">)</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>  <span class="n">year</span><span class="p">:</span> <span class="n">number</span><span class="p">;</span>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="p">}</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">CreateBookDto</span> <span class="n">extends</span> <span class="n">OmitType</span><span class="p">(</span><span class="n">BookDto</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span> <span class="p">{}</span>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">UpdateBookDto</span> <span class="n">extends</span> <span class="n">OmitType</span><span class="p">(</span><span class="n">BookDto</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span> <span class="p">{}</span>
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">FindBookDto</span> <span class="n">extends</span> <span class="n">PageRequestDto</span> <span class="p">{</span>
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a>  <span class="n">title</span><span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span><span id="__span-16-24"><a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a>  <span class="n">author</span><span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span><span id="__span-16-25"><a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Langkah Ke Empat kita ubah koding findAllBook pada controller dan service</strong></p>
<p><strong>book.service.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="kn">import</span> <span class="p">{</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>  <span class="n">HttpException</span><span class="p">,</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>  <span class="n">HttpStatus</span><span class="p">,</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>  <span class="n">Injectable</span><span class="p">,</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>  <span class="n">NotFoundException</span><span class="p">,</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@nestjs/common&#39;</span><span class="p">;</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">ResponsePagination</span><span class="p">,</span> <span class="n">ResponseSuccess</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/interface/response&#39;</span><span class="p">;</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">CreateBookDto</span><span class="p">,</span> <span class="n">FindBookDto</span><span class="p">,</span> <span class="n">UpdateBookDto</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./book.dto&#39;</span><span class="p">;</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">InjectRepository</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@nestjs/typeorm&#39;</span><span class="p">;</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">Book</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./book.entity&#39;</span><span class="p">;</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">Repository</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;typeorm&#39;</span><span class="p">;</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="nd">@Injectable</span><span class="p">()</span>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">BookService</span> <span class="p">{</span>
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>  <span class="n">constructor</span><span class="p">(</span>
</span><span id="__span-17-16"><a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a>    <span class="nd">@InjectRepository</span><span class="p">(</span><span class="n">Book</span><span class="p">)</span> <span class="n">private</span> <span class="n">readonly</span> <span class="n">bookRepository</span><span class="p">:</span> <span class="n">Repository</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-17-17"><a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a>  <span class="p">)</span> <span class="p">{}</span>
</span><span id="__span-17-18"><a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a>  <span class="n">private</span> <span class="n">books</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-17-19"><a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a>    <span class="nb">id</span><span class="err">?</span><span class="p">:</span> <span class="n">number</span><span class="p">;</span>
</span><span id="__span-17-20"><a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span><span id="__span-17-21"><a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span><span id="__span-17-22"><a id="__codelineno-17-22" name="__codelineno-17-22" href="#__codelineno-17-22"></a>    <span class="n">year</span><span class="p">:</span> <span class="n">number</span><span class="p">;</span>
</span><span id="__span-17-23"><a id="__codelineno-17-23" name="__codelineno-17-23" href="#__codelineno-17-23"></a>  <span class="p">}[]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-17-24"><a id="__codelineno-17-24" name="__codelineno-17-24" href="#__codelineno-17-24"></a>    <span class="p">{</span>
</span><span id="__span-17-25"><a id="__codelineno-17-25" name="__codelineno-17-25" href="#__codelineno-17-25"></a>      <span class="nb">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="__span-17-26"><a id="__codelineno-17-26" name="__codelineno-17-26" href="#__codelineno-17-26"></a>      <span class="n">title</span><span class="p">:</span> <span class="s1">&#39;HTML CSS&#39;</span><span class="p">,</span>
</span><span id="__span-17-27"><a id="__codelineno-17-27" name="__codelineno-17-27" href="#__codelineno-17-27"></a>      <span class="n">author</span><span class="p">:</span> <span class="s1">&#39;ihsanabuhanifah&#39;</span><span class="p">,</span>
</span><span id="__span-17-28"><a id="__codelineno-17-28" name="__codelineno-17-28" href="#__codelineno-17-28"></a>      <span class="n">year</span><span class="p">:</span> <span class="mi">2023</span><span class="p">,</span>
</span><span id="__span-17-29"><a id="__codelineno-17-29" name="__codelineno-17-29" href="#__codelineno-17-29"></a>    <span class="p">},</span>
</span><span id="__span-17-30"><a id="__codelineno-17-30" name="__codelineno-17-30" href="#__codelineno-17-30"></a>  <span class="p">];</span>
</span><span id="__span-17-31"><a id="__codelineno-17-31" name="__codelineno-17-31" href="#__codelineno-17-31"></a>
</span><span id="__span-17-32"><a id="__codelineno-17-32" name="__codelineno-17-32" href="#__codelineno-17-32"></a>  <span class="k">async</span> <span class="n">getAllBooks</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="n">FindBookDto</span><span class="p">):</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">ResponsePagination</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span id="__span-17-33"><a id="__codelineno-17-33" name="__codelineno-17-33" href="#__codelineno-17-33"></a>    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;uqwey&#39;</span><span class="p">,</span> <span class="n">query</span><span class="p">);</span>
</span><span id="__span-17-34"><a id="__codelineno-17-34" name="__codelineno-17-34" href="#__codelineno-17-34"></a>    <span class="n">const</span> <span class="p">{</span> <span class="n">page</span><span class="p">,</span> <span class="n">pageSize</span> <span class="p">}</span> <span class="o">=</span> <span class="n">query</span><span class="p">;</span>
</span><span id="__span-17-35"><a id="__codelineno-17-35" name="__codelineno-17-35" href="#__codelineno-17-35"></a>    <span class="n">const</span> <span class="n">total</span> <span class="o">=</span> <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">count</span><span class="p">();</span>
</span><span id="__span-17-36"><a id="__codelineno-17-36" name="__codelineno-17-36" href="#__codelineno-17-36"></a>
</span><span id="__span-17-37"><a id="__codelineno-17-37" name="__codelineno-17-37" href="#__codelineno-17-37"></a>    <span class="n">const</span> <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">find</span><span class="p">({</span>
</span><span id="__span-17-38"><a id="__codelineno-17-38" name="__codelineno-17-38" href="#__codelineno-17-38"></a>      <span class="n">skip</span><span class="p">:</span> <span class="p">(</span><span class="n">Number</span><span class="p">(</span><span class="n">page</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">Number</span><span class="p">(</span><span class="n">pageSize</span><span class="p">),</span>
</span><span id="__span-17-39"><a id="__codelineno-17-39" name="__codelineno-17-39" href="#__codelineno-17-39"></a>      <span class="n">take</span><span class="p">:</span> <span class="n">Number</span><span class="p">(</span><span class="n">pageSize</span><span class="p">),</span>
</span><span id="__span-17-40"><a id="__codelineno-17-40" name="__codelineno-17-40" href="#__codelineno-17-40"></a>    <span class="p">});</span>
</span><span id="__span-17-41"><a id="__codelineno-17-41" name="__codelineno-17-41" href="#__codelineno-17-41"></a>
</span><span id="__span-17-42"><a id="__codelineno-17-42" name="__codelineno-17-42" href="#__codelineno-17-42"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-17-43"><a id="__codelineno-17-43" name="__codelineno-17-43" href="#__codelineno-17-43"></a>      <span class="n">status</span><span class="p">:</span> <span class="s1">&#39;Success&#39;</span><span class="p">,</span>
</span><span id="__span-17-44"><a id="__codelineno-17-44" name="__codelineno-17-44" href="#__codelineno-17-44"></a>      <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;List Buku ditermukan&#39;</span><span class="p">,</span>
</span><span id="__span-17-45"><a id="__codelineno-17-45" name="__codelineno-17-45" href="#__codelineno-17-45"></a>      <span class="n">data</span><span class="p">:</span> <span class="n">result</span><span class="p">,</span>
</span><span id="__span-17-46"><a id="__codelineno-17-46" name="__codelineno-17-46" href="#__codelineno-17-46"></a>      <span class="n">pagination</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-17-47"><a id="__codelineno-17-47" name="__codelineno-17-47" href="#__codelineno-17-47"></a>        <span class="n">total</span><span class="p">:</span> <span class="n">total</span><span class="p">,</span>
</span><span id="__span-17-48"><a id="__codelineno-17-48" name="__codelineno-17-48" href="#__codelineno-17-48"></a>        <span class="n">page</span><span class="p">:</span> <span class="n">Number</span><span class="p">(</span><span class="n">page</span><span class="p">),</span>
</span><span id="__span-17-49"><a id="__codelineno-17-49" name="__codelineno-17-49" href="#__codelineno-17-49"></a>        <span class="n">pageSize</span><span class="p">:</span> <span class="n">Number</span><span class="p">(</span><span class="n">pageSize</span><span class="p">),</span>
</span><span id="__span-17-50"><a id="__codelineno-17-50" name="__codelineno-17-50" href="#__codelineno-17-50"></a>      <span class="p">},</span>
</span><span id="__span-17-51"><a id="__codelineno-17-51" name="__codelineno-17-51" href="#__codelineno-17-51"></a>    <span class="p">};</span>
</span><span id="__span-17-52"><a id="__codelineno-17-52" name="__codelineno-17-52" href="#__codelineno-17-52"></a>  <span class="p">}</span>
</span><span id="__span-17-53"><a id="__codelineno-17-53" name="__codelineno-17-53" href="#__codelineno-17-53"></a>
</span><span id="__span-17-54"><a id="__codelineno-17-54" name="__codelineno-17-54" href="#__codelineno-17-54"></a>
</span><span id="__span-17-55"><a id="__codelineno-17-55" name="__codelineno-17-55" href="#__codelineno-17-55"></a>  <span class="o">...</span>
</span><span id="__span-17-56"><a id="__codelineno-17-56" name="__codelineno-17-56" href="#__codelineno-17-56"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>book.controller.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kn">import</span> <span class="p">{</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>  <span class="n">Body</span><span class="p">,</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>  <span class="n">Controller</span><span class="p">,</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>  <span class="n">Delete</span><span class="p">,</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>  <span class="n">Get</span><span class="p">,</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>  <span class="n">Param</span><span class="p">,</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>  <span class="n">Post</span><span class="p">,</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>  <span class="n">Put</span><span class="p">,</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>  <span class="n">Query</span><span class="p">,</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>  <span class="n">UsePipes</span><span class="p">,</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>  <span class="n">ValidationPipe</span><span class="p">,</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;@nestjs/common&quot;</span><span class="p">;</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">BookService</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;./book.service&quot;</span><span class="p">;</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">CreateBookDto</span><span class="p">,</span> <span class="n">FindBookDto</span><span class="p">,</span> <span class="n">UpdateBookDto</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;./book.dto&quot;</span><span class="p">;</span>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>
</span><span id="__span-18-16"><a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="nd">@Controller</span><span class="p">(</span><span class="s2">&quot;book&quot;</span><span class="p">)</span>
</span><span id="__span-18-17"><a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">BookController</span> <span class="p">{</span>
</span><span id="__span-18-18"><a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a>  <span class="n">constructor</span><span class="p">(</span><span class="n">private</span> <span class="n">bookService</span><span class="p">:</span> <span class="n">BookService</span><span class="p">)</span> <span class="p">{}</span>
</span><span id="__span-18-19"><a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>
</span><span id="__span-18-20"><a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>  <span class="nd">@Get</span><span class="p">(</span><span class="s2">&quot;/list&quot;</span><span class="p">)</span>
</span><span id="__span-18-21"><a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a>  <span class="n">findAllBook</span><span class="p">(</span><span class="nd">@Query</span><span class="p">()</span> <span class="n">findBookDto</span><span class="p">:</span> <span class="n">FindBookDto</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-18-22"><a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a>    <span class="k">return</span> <span class="n">this</span><span class="o">.</span><span class="n">bookService</span><span class="o">.</span><span class="n">getAllBooks</span><span class="p">(</span><span class="n">findBookDto</span><span class="p">);</span>
</span><span id="__span-18-23"><a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a>  <span class="p">}</span>
</span><span id="__span-18-24"><a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a><span class="p">}</span>
</span></code></pre></div>
<p>Pengujian pada Postman</p>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=1nQgEruLWB8lsAaVXbtiquaLjB_eIzCtz" /></p>
<h3 id="12-implementasi-custom-decorator-untuk-meyederhanakan-paging"><strong>12. Implementasi Custom Decorator untuk meyederhanakan Paging</strong></h3>
<p>Selain mengguankan decorator bawaan seperti <code>@Body()</code>, <code>@Query()</code>, <code>@Param()</code> pada controler, kita juga bisa membuat Custom Decorator seperti pada dokumentasi https://docs.nestjs.com/custom-decorators.
Pada contoh kasus kali ini, kita akan membuat Custom Decorator untuk paging sehingga, pada setiap service kita tidak perlu menghitung ulang page dan limit untuk paging</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="k">async</span> <span class="n">getAllBooks</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="n">FindBookDto</span><span class="p">):</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">ResponsePagination</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>   <span class="o">...</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>    <span class="n">const</span> <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">find</span><span class="p">({</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>      <span class="n">skip</span><span class="p">:</span> <span class="p">(</span><span class="n">Number</span><span class="p">(</span><span class="n">page</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">Number</span><span class="p">(</span><span class="n">pageSize</span><span class="p">),</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>      <span class="n">take</span><span class="p">:</span> <span class="n">Number</span><span class="p">(</span><span class="n">pageSize</span><span class="p">),</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>    <span class="p">});</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>  <span class="o">...</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>  <span class="p">}</span>
</span></code></pre></div>
<p>Perhatikan pada bagian skip, disitu kita harus menghitung limit , bayangkan jika kita membuat fitur ini pada module lain, maka kita harus selalu menghitung limit. Tentu hal ini tidak efektif karena harus melalukan pekerjaan yang sama secara berulang. Pada materi ini kita akan membuat custom decorator agar kita tidak perlu menghitung ulang limit, namun nanti kita hanya tinggal menggunakan saja pada setiap service.</p>
<p><strong>Langkah pertama, buatlah folder decorator pada folder utils</strong></p>
<p><strong>src/utils/decorator/pagination.decorator.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">createParamDecorator</span><span class="p">,</span> <span class="n">ExecutionContext</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@nestjs/common&#39;</span><span class="p">;</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="n">export</span> <span class="n">const</span> <span class="n">Pagination</span> <span class="o">=</span> <span class="n">createParamDecorator</span><span class="p">(</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>  <span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">unknown</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">ExecutionContext</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>    <span class="n">const</span> <span class="n">request</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">switchToHttp</span><span class="p">()</span><span class="o">.</span><span class="n">getRequest</span><span class="p">();</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>    <span class="k">if</span> <span class="p">(</span><span class="err">!!</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">page</span> <span class="o">===</span> <span class="n">false</span><span class="p">)</span> <span class="p">{</span>   <span class="o">//</span><span class="n">memberikan</span> <span class="n">nilai</span> <span class="n">default</span> <span class="mi">1</span> <span class="n">jika</span> <span class="n">tidak</span> <span class="n">dikirim</span> <span class="n">client</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>      <span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">page</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>    <span class="p">}</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>    <span class="k">if</span> <span class="p">(</span><span class="err">!!</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">pageSize</span> <span class="o">===</span> <span class="n">false</span><span class="p">)</span> <span class="p">{</span> <span class="o">//</span><span class="n">memberikan</span> <span class="n">nilai</span> <span class="n">default</span> <span class="mi">10</span> <span class="n">jika</span> <span class="n">tidak</span> <span class="n">dikirim</span> <span class="n">client</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>      <span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">pageSize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>    <span class="p">}</span>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>    <span class="n">request</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a>      <span class="p">(</span><span class="n">Number</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">page</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">Number</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">pageSize</span><span class="p">);</span>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a>    <span class="n">request</span><span class="o">.</span><span class="n">pageSize</span> <span class="o">=</span> <span class="n">Number</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">pageSize</span><span class="p">);</span>
</span><span id="__span-20-17"><a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a>    <span class="n">request</span><span class="o">.</span><span class="n">page</span> <span class="o">=</span> <span class="n">Number</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">page</span><span class="p">);</span>
</span><span id="__span-20-18"><a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a>    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="p">;</span>
</span><span id="__span-20-19"><a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a>  <span class="p">},</span>
</span><span id="__span-20-20"><a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a><span class="p">);</span>
</span></code></pre></div>
<p>Pada kode di atas , kita menghitung limit dan kita return hasilnya pada decorator pagination</p>
<p><strong>Langkah kedua, update main.ts</strong></p>
<p>Karena kita menggunakan custom decorator maka kita harus mengaktifkan validateCustomDecorators menjadi true seperti pada kode di bawah.</p>
<p><strong>main.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">NestFactory</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;@nestjs/core&quot;</span><span class="p">;</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">AppModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;./app.module&quot;</span><span class="p">;</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">ValidationPipe</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;@nestjs/common&quot;</span><span class="p">;</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="k">async</span> <span class="n">function</span> <span class="n">bootstrap</span><span class="p">()</span> <span class="p">{</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>  <span class="n">const</span> <span class="n">app</span> <span class="o">=</span> <span class="k">await</span> <span class="n">NestFactory</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">AppModule</span><span class="p">);</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>  <span class="n">app</span><span class="o">.</span><span class="n">useGlobalPipes</span><span class="p">(</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>    <span class="n">new</span> <span class="n">ValidationPipe</span><span class="p">({</span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>      <span class="n">whitelist</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>      <span class="n">forbidUnknownValues</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>      <span class="n">transform</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>      <span class="n">validateCustomDecorators</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>      <span class="n">transformOptions</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>        <span class="n">enableImplicitConversion</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
</span><span id="__span-21-15"><a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>      <span class="p">},</span>
</span><span id="__span-21-16"><a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a>    <span class="p">})</span>
</span><span id="__span-21-17"><a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a>  <span class="p">);</span>
</span><span id="__span-21-18"><a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a>  <span class="k">await</span> <span class="n">app</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">5002</span><span class="p">);</span>
</span><span id="__span-21-19"><a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a><span class="p">}</span>
</span><span id="__span-21-20"><a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a><span class="n">bootstrap</span><span class="p">();</span>
</span></code></pre></div>
<p><strong>Langkah Ketiga</strong></p>
<p>Selanjutnya kita ganti decorator <strong>@Query()</strong> pada findAllBook di book.controller.ts dengan custom decorator <strong>Pagination()</strong> yang kita buat.</p>
<p><strong>book.controller.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="kn">import</span> <span class="p">{</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>  <span class="n">Body</span><span class="p">,</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>  <span class="n">Controller</span><span class="p">,</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>  <span class="n">Delete</span><span class="p">,</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>  <span class="n">Get</span><span class="p">,</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>  <span class="n">Param</span><span class="p">,</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>  <span class="n">Post</span><span class="p">,</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>  <span class="n">Put</span><span class="p">,</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>  <span class="n">Query</span><span class="p">,</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>  <span class="n">UsePipes</span><span class="p">,</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>  <span class="n">ValidationPipe</span><span class="p">,</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@nestjs/common&#39;</span><span class="p">;</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">BookService</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./book.service&#39;</span><span class="p">;</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">CreateBookDto</span><span class="p">,</span> <span class="n">FindBookDto</span><span class="p">,</span> <span class="n">UpdateBookDto</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./book.dto&#39;</span><span class="p">;</span>
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">Pagination</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/utils/decorator/pagination.decorator&#39;</span><span class="p">;</span>
</span><span id="__span-22-16"><a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a>
</span><span id="__span-22-17"><a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="nd">@Controller</span><span class="p">(</span><span class="s1">&#39;book&#39;</span><span class="p">)</span>
</span><span id="__span-22-18"><a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">BookController</span> <span class="p">{</span>
</span><span id="__span-22-19"><a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a>  <span class="n">constructor</span><span class="p">(</span><span class="n">private</span> <span class="n">bookService</span><span class="p">:</span> <span class="n">BookService</span><span class="p">)</span> <span class="p">{}</span>
</span><span id="__span-22-20"><a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a>
</span><span id="__span-22-21"><a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a>  <span class="nd">@Get</span><span class="p">(</span><span class="s1">&#39;/list&#39;</span><span class="p">)</span>
</span><span id="__span-22-22"><a id="__codelineno-22-22" name="__codelineno-22-22" href="#__codelineno-22-22"></a>  <span class="n">findAllBook</span><span class="p">(</span><span class="nd">@Pagination</span><span class="p">()</span> <span class="n">findBookDto</span><span class="p">:</span> <span class="n">FindBookDto</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-22-23"><a id="__codelineno-22-23" name="__codelineno-22-23" href="#__codelineno-22-23"></a>    <span class="k">return</span> <span class="n">this</span><span class="o">.</span><span class="n">bookService</span><span class="o">.</span><span class="n">getAllBooks</span><span class="p">(</span><span class="n">findBookDto</span><span class="p">);</span>
</span><span id="__span-22-24"><a id="__codelineno-22-24" name="__codelineno-22-24" href="#__codelineno-22-24"></a>  <span class="p">}</span>
</span><span id="__span-22-25"><a id="__codelineno-22-25" name="__codelineno-22-25" href="#__codelineno-22-25"></a>
</span><span id="__span-22-26"><a id="__codelineno-22-26" name="__codelineno-22-26" href="#__codelineno-22-26"></a>  <span class="o">...</span>
</span><span id="__span-22-27"><a id="__codelineno-22-27" name="__codelineno-22-27" href="#__codelineno-22-27"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Langkah keempat</strong>
Selanjutnya kita terapkan limit dan pageSize pada book.service.ts</p>
<p><strong>book.service.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="k">async</span> <span class="n">getAllBooks</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="n">FindBookDto</span><span class="p">):</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">ResponsePagination</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>    <span class="n">const</span> <span class="p">{</span> <span class="n">page</span><span class="p">,</span> <span class="n">pageSize</span><span class="p">,</span> <span class="n">limit</span> <span class="p">}</span> <span class="o">=</span> <span class="n">query</span><span class="p">;</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>    <span class="n">const</span> <span class="n">total</span> <span class="o">=</span> <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">count</span><span class="p">();</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>    <span class="n">const</span> <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">find</span><span class="p">({</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>      <span class="n">skip</span><span class="p">:</span> <span class="n">limit</span><span class="p">,</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>      <span class="n">take</span><span class="p">:</span> <span class="n">pageSize</span><span class="p">,</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>    <span class="p">});</span>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a>      <span class="n">status</span><span class="p">:</span> <span class="s1">&#39;Success&#39;</span><span class="p">,</span>
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a>      <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;List Buku ditermukan&#39;</span><span class="p">,</span>
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a>      <span class="n">data</span><span class="p">:</span> <span class="n">result</span><span class="p">,</span>
</span><span id="__span-23-14"><a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a>      <span class="n">pagination</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-23-15"><a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a>        <span class="n">total</span><span class="p">:</span> <span class="n">total</span><span class="p">,</span>
</span><span id="__span-23-16"><a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a>        <span class="n">page</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span>
</span><span id="__span-23-17"><a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a>        <span class="n">pageSize</span><span class="p">:</span> <span class="n">pageSize</span><span class="p">,</span>
</span><span id="__span-23-18"><a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a>      <span class="p">},</span>
</span><span id="__span-23-19"><a id="__codelineno-23-19" name="__codelineno-23-19" href="#__codelineno-23-19"></a>    <span class="p">};</span>
</span><span id="__span-23-20"><a id="__codelineno-23-20" name="__codelineno-23-20" href="#__codelineno-23-20"></a>  <span class="p">}</span>
</span></code></pre></div>
<p>saat kita nemmbahkan limit pada query maka akan muncul error, untuk mengatasi hal tersebut kita perbaharui page.dto.ts</p>
<p><strong>page.dto.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">Type</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;class-transformer&quot;</span><span class="p">;</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">IsInt</span><span class="p">,</span> <span class="n">IsOptional</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;class-validator&quot;</span><span class="p">;</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">PageRequestDto</span> <span class="p">{</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>  <span class="nd">@IsInt</span><span class="p">()</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>  <span class="nd">@Type</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="n">Number</span><span class="p">)</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>  <span class="n">page</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>  <span class="nd">@IsInt</span><span class="p">()</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>  <span class="nd">@Type</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="n">Number</span><span class="p">)</span>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>  <span class="n">pageSize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a>  <span class="nd">@IsInt</span><span class="p">()</span>
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a>  <span class="nd">@IsOptional</span><span class="p">()</span>
</span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a>  <span class="n">limit</span><span class="p">;</span>
</span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="p">}</span>
</span></code></pre></div>
<p>Pengujian pada Postman</p>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=1kEoMa8zvMzJ04rAoo8em0jdFODJOYNwi" /></p>
<h3 id="13-membuat-filter-page-getallbook"><strong>13. Membuat Filter page getAllBook</strong></h3>
<p>Seringkali ketika menampilkan data , kita membutuhkan filter fitur yang bisa dikombinasikan atau salah satu saja.
Contoh pada kasus book kita kita bisa memcari berdasarkan salah satu dari author, title, year atau kombinasi ketiga nya.</p>
<p>Pada materi kali ini kita akan membuar fitur filter berdasrkan title, author, dan range tahun terbit seperti terlihat pada postman</p>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=1utivx7NuuH_9_ULvOQJHYYsK6gDZ8Cyu" /></p>
<p><strong>Langkah Pertama</strong></p>
<p>Kita tambahkan option titile, author, from_year, to_year pada book.dto.ts</p>
<p><strong>book.dto.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">OmitType</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;@nestjs/mapped-types&quot;</span><span class="p">;</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">Type</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;class-transformer&quot;</span><span class="p">;</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="kn">import</span> <span class="p">{</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>  <span class="n">IsInt</span><span class="p">,</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>  <span class="n">IsNotEmpty</span><span class="p">,</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>  <span class="n">Min</span><span class="p">,</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>  <span class="n">Max</span><span class="p">,</span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>  <span class="n">Length</span><span class="p">,</span>
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>  <span class="n">IsOptional</span><span class="p">,</span>
</span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;class-validator&quot;</span><span class="p">;</span>
</span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">PageRequestDto</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;src/utils/dto/page.dto&quot;</span><span class="p">;</span>
</span><span id="__span-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">BookDto</span> <span class="p">{</span>
</span><span id="__span-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>  <span class="nb">id</span><span class="p">:</span> <span class="n">number</span><span class="p">;</span>
</span><span id="__span-25-14"><a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a>
</span><span id="__span-25-15"><a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>  <span class="nd">@IsNotEmpty</span><span class="p">()</span>
</span><span id="__span-25-16"><a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a>  <span class="nd">@Length</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</span><span id="__span-25-17"><a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a>  <span class="n">title</span><span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span><span id="__span-25-18"><a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a>
</span><span id="__span-25-19"><a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a>  <span class="nd">@IsNotEmpty</span><span class="p">()</span>
</span><span id="__span-25-20"><a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a>  <span class="n">author</span><span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span><span id="__span-25-21"><a id="__codelineno-25-21" name="__codelineno-25-21" href="#__codelineno-25-21"></a>
</span><span id="__span-25-22"><a id="__codelineno-25-22" name="__codelineno-25-22" href="#__codelineno-25-22"></a>  <span class="nd">@IsInt</span><span class="p">()</span>
</span><span id="__span-25-23"><a id="__codelineno-25-23" name="__codelineno-25-23" href="#__codelineno-25-23"></a>  <span class="nd">@Min</span><span class="p">(</span><span class="mi">2020</span><span class="p">)</span>
</span><span id="__span-25-24"><a id="__codelineno-25-24" name="__codelineno-25-24" href="#__codelineno-25-24"></a>  <span class="nd">@Max</span><span class="p">(</span><span class="mi">2023</span><span class="p">)</span>
</span><span id="__span-25-25"><a id="__codelineno-25-25" name="__codelineno-25-25" href="#__codelineno-25-25"></a>  <span class="n">year</span><span class="p">:</span> <span class="n">number</span><span class="p">;</span>
</span><span id="__span-25-26"><a id="__codelineno-25-26" name="__codelineno-25-26" href="#__codelineno-25-26"></a><span class="p">}</span>
</span><span id="__span-25-27"><a id="__codelineno-25-27" name="__codelineno-25-27" href="#__codelineno-25-27"></a>
</span><span id="__span-25-28"><a id="__codelineno-25-28" name="__codelineno-25-28" href="#__codelineno-25-28"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">CreateBookDto</span> <span class="n">extends</span> <span class="n">OmitType</span><span class="p">(</span><span class="n">BookDto</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span> <span class="p">{}</span>
</span><span id="__span-25-29"><a id="__codelineno-25-29" name="__codelineno-25-29" href="#__codelineno-25-29"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">UpdateBookDto</span> <span class="n">extends</span> <span class="n">OmitType</span><span class="p">(</span><span class="n">BookDto</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span> <span class="p">{}</span>
</span><span id="__span-25-30"><a id="__codelineno-25-30" name="__codelineno-25-30" href="#__codelineno-25-30"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">FindBookDto</span> <span class="n">extends</span> <span class="n">PageRequestDto</span> <span class="p">{</span>
</span><span id="__span-25-31"><a id="__codelineno-25-31" name="__codelineno-25-31" href="#__codelineno-25-31"></a>  <span class="nd">@IsOptional</span><span class="p">()</span>
</span><span id="__span-25-32"><a id="__codelineno-25-32" name="__codelineno-25-32" href="#__codelineno-25-32"></a>  <span class="n">title</span><span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span><span id="__span-25-33"><a id="__codelineno-25-33" name="__codelineno-25-33" href="#__codelineno-25-33"></a>
</span><span id="__span-25-34"><a id="__codelineno-25-34" name="__codelineno-25-34" href="#__codelineno-25-34"></a>  <span class="nd">@IsOptional</span><span class="p">()</span>
</span><span id="__span-25-35"><a id="__codelineno-25-35" name="__codelineno-25-35" href="#__codelineno-25-35"></a>  <span class="n">author</span><span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span><span id="__span-25-36"><a id="__codelineno-25-36" name="__codelineno-25-36" href="#__codelineno-25-36"></a>
</span><span id="__span-25-37"><a id="__codelineno-25-37" name="__codelineno-25-37" href="#__codelineno-25-37"></a>  <span class="nd">@IsOptional</span><span class="p">()</span>
</span><span id="__span-25-38"><a id="__codelineno-25-38" name="__codelineno-25-38" href="#__codelineno-25-38"></a>  <span class="nd">@IsInt</span><span class="p">()</span>
</span><span id="__span-25-39"><a id="__codelineno-25-39" name="__codelineno-25-39" href="#__codelineno-25-39"></a>  <span class="nd">@Type</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="n">Number</span><span class="p">)</span>
</span><span id="__span-25-40"><a id="__codelineno-25-40" name="__codelineno-25-40" href="#__codelineno-25-40"></a>  <span class="n">from_year</span><span class="p">:</span> <span class="n">number</span><span class="p">;</span>
</span><span id="__span-25-41"><a id="__codelineno-25-41" name="__codelineno-25-41" href="#__codelineno-25-41"></a>
</span><span id="__span-25-42"><a id="__codelineno-25-42" name="__codelineno-25-42" href="#__codelineno-25-42"></a>  <span class="nd">@IsOptional</span><span class="p">()</span>
</span><span id="__span-25-43"><a id="__codelineno-25-43" name="__codelineno-25-43" href="#__codelineno-25-43"></a>  <span class="nd">@IsInt</span><span class="p">()</span>
</span><span id="__span-25-44"><a id="__codelineno-25-44" name="__codelineno-25-44" href="#__codelineno-25-44"></a>  <span class="nd">@Type</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="n">Number</span><span class="p">)</span>
</span><span id="__span-25-45"><a id="__codelineno-25-45" name="__codelineno-25-45" href="#__codelineno-25-45"></a>  <span class="n">to_year</span><span class="p">:</span> <span class="n">number</span><span class="p">;</span>
</span><span id="__span-25-46"><a id="__codelineno-25-46" name="__codelineno-25-46" href="#__codelineno-25-46"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Langkah kedua</strong></p>
<p>Selanjutkan kita tambahkan condition statement pada method find tyoeorm</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="k">async</span> <span class="n">getAllBooks</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="n">FindBookDto</span><span class="p">):</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">ResponsePagination</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>    <span class="n">const</span> <span class="p">{</span> <span class="n">page</span><span class="p">,</span> <span class="n">pageSize</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">author</span><span class="p">,</span> <span class="n">from_year</span><span class="p">,</span> <span class="n">to_year</span> <span class="p">}</span> <span class="o">=</span> <span class="n">query</span><span class="p">;</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;q&#39;</span><span class="p">,</span> <span class="n">query</span><span class="p">);</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>    <span class="n">const</span> <span class="n">total</span> <span class="o">=</span> <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">count</span><span class="p">();</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>    <span class="n">const</span> <span class="nb">filter</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>      <span class="p">[</span><span class="n">key</span><span class="p">:</span> <span class="n">string</span><span class="p">]:</span> <span class="nb">any</span><span class="p">;</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>    <span class="p">}</span> <span class="o">=</span> <span class="p">{};</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">title</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a>      <span class="nb">filter</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">Like</span><span class="p">(</span><span class="err">`</span><span class="o">%</span><span class="err">$</span><span class="p">{</span><span class="n">title</span><span class="p">}</span><span class="o">%</span><span class="err">`</span><span class="p">);</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a>    <span class="p">}</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">author</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a>      <span class="nb">filter</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Like</span><span class="p">(</span><span class="err">`</span><span class="o">%</span><span class="err">$</span><span class="p">{</span><span class="n">author</span><span class="p">}</span><span class="o">%</span><span class="err">`</span><span class="p">);</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a>    <span class="p">}</span>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a>
</span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">from_year</span> <span class="o">&amp;&amp;</span> <span class="n">to_year</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-26-19"><a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a>      <span class="nb">filter</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="n">Between</span><span class="p">(</span><span class="n">from_year</span><span class="p">,</span> <span class="n">to_year</span><span class="p">);</span>
</span><span id="__span-26-20"><a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a>    <span class="p">}</span>
</span><span id="__span-26-21"><a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a>
</span><span id="__span-26-22"><a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">from_year</span> <span class="o">&amp;&amp;</span> <span class="err">!!</span><span class="n">to_year</span> <span class="o">===</span> <span class="n">false</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-26-23"><a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a>      <span class="nb">filter</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="n">Between</span><span class="p">(</span><span class="n">from_year</span><span class="p">,</span> <span class="n">from_year</span><span class="p">);</span>
</span><span id="__span-26-24"><a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a>    <span class="p">}</span>
</span><span id="__span-26-25"><a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a>
</span><span id="__span-26-26"><a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a>    <span class="n">const</span> <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">find</span><span class="p">({</span>
</span><span id="__span-26-27"><a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a>      <span class="n">where</span><span class="p">:</span> <span class="nb">filter</span><span class="p">,</span>
</span><span id="__span-26-28"><a id="__codelineno-26-28" name="__codelineno-26-28" href="#__codelineno-26-28"></a>      <span class="n">skip</span><span class="p">:</span> <span class="n">limit</span><span class="p">,</span>
</span><span id="__span-26-29"><a id="__codelineno-26-29" name="__codelineno-26-29" href="#__codelineno-26-29"></a>      <span class="n">take</span><span class="p">:</span> <span class="n">pageSize</span><span class="p">,</span>
</span><span id="__span-26-30"><a id="__codelineno-26-30" name="__codelineno-26-30" href="#__codelineno-26-30"></a>    <span class="p">});</span>
</span><span id="__span-26-31"><a id="__codelineno-26-31" name="__codelineno-26-31" href="#__codelineno-26-31"></a>
</span><span id="__span-26-32"><a id="__codelineno-26-32" name="__codelineno-26-32" href="#__codelineno-26-32"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-26-33"><a id="__codelineno-26-33" name="__codelineno-26-33" href="#__codelineno-26-33"></a>      <span class="n">status</span><span class="p">:</span> <span class="s1">&#39;Success&#39;</span><span class="p">,</span>
</span><span id="__span-26-34"><a id="__codelineno-26-34" name="__codelineno-26-34" href="#__codelineno-26-34"></a>      <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;List Buku ditermukan&#39;</span><span class="p">,</span>
</span><span id="__span-26-35"><a id="__codelineno-26-35" name="__codelineno-26-35" href="#__codelineno-26-35"></a>      <span class="n">data</span><span class="p">:</span> <span class="n">result</span><span class="p">,</span>
</span><span id="__span-26-36"><a id="__codelineno-26-36" name="__codelineno-26-36" href="#__codelineno-26-36"></a>      <span class="n">pagination</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-26-37"><a id="__codelineno-26-37" name="__codelineno-26-37" href="#__codelineno-26-37"></a>        <span class="n">total</span><span class="p">:</span> <span class="n">total</span><span class="p">,</span>
</span><span id="__span-26-38"><a id="__codelineno-26-38" name="__codelineno-26-38" href="#__codelineno-26-38"></a>        <span class="n">page</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span>
</span><span id="__span-26-39"><a id="__codelineno-26-39" name="__codelineno-26-39" href="#__codelineno-26-39"></a>        <span class="n">pageSize</span><span class="p">:</span> <span class="n">pageSize</span><span class="p">,</span>
</span><span id="__span-26-40"><a id="__codelineno-26-40" name="__codelineno-26-40" href="#__codelineno-26-40"></a>      <span class="p">},</span>
</span><span id="__span-26-41"><a id="__codelineno-26-41" name="__codelineno-26-41" href="#__codelineno-26-41"></a>    <span class="p">};</span>
</span><span id="__span-26-42"><a id="__codelineno-26-42" name="__codelineno-26-42" href="#__codelineno-26-42"></a>  <span class="p">}</span>
</span></code></pre></div>
<p>Pengujian Postman</p>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=1WMYQSpqhYfdCj10U6Fhwcm30yOHV4nAw" /></p>
<h3 id="14-membuat-base-response"><strong>14. Membuat Base Response</strong></h3>
<p>untuk membuat penulisan response menjadi sederhana saat return dalam service, kita akan membuat class Base Response pada folder utils.</p>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=1kZ601rO4AitWB2F43WawqfDW0BFu_ok7" /></p>
<p><strong>utils/response/base.response.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">ResponseSuccess</span><span class="p">,</span> <span class="n">ResponsePagination</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;src/interface/response&quot;</span><span class="p">;</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="k">class</span> <span class="nc">BaseResponse</span> <span class="p">{</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>  <span class="n">_success</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span> <span class="n">data</span><span class="err">?</span><span class="p">:</span> <span class="nb">any</span><span class="p">):</span> <span class="n">ResponseSuccess</span> <span class="p">{</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>      <span class="n">status</span><span class="p">:</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>      <span class="n">message</span><span class="p">:</span> <span class="n">message</span><span class="p">,</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>      <span class="n">data</span><span class="p">:</span> <span class="n">data</span> <span class="o">||</span> <span class="p">{},</span>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>    <span class="p">};</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a>  <span class="p">}</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a>
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a>  <span class="n">_pagination</span><span class="p">(</span>
</span><span id="__span-27-13"><a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a>    <span class="n">message</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-27-14"><a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a>    <span class="n">data</span><span class="p">:</span> <span class="nb">any</span><span class="p">,</span>
</span><span id="__span-27-15"><a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a>    <span class="n">totalData</span><span class="p">:</span> <span class="n">number</span><span class="p">,</span>
</span><span id="__span-27-16"><a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a>    <span class="n">page</span><span class="p">:</span> <span class="n">number</span><span class="p">,</span>
</span><span id="__span-27-17"><a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a>    <span class="n">pageSize</span><span class="p">:</span> <span class="n">number</span>
</span><span id="__span-27-18"><a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a>  <span class="p">):</span> <span class="n">ResponsePagination</span> <span class="p">{</span>
</span><span id="__span-27-19"><a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-27-20"><a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a>      <span class="n">status</span><span class="p">:</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span>
</span><span id="__span-27-21"><a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a>      <span class="n">message</span><span class="p">:</span> <span class="n">message</span><span class="p">,</span>
</span><span id="__span-27-22"><a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a>      <span class="n">data</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span>
</span><span id="__span-27-23"><a id="__codelineno-27-23" name="__codelineno-27-23" href="#__codelineno-27-23"></a>      <span class="n">pagination</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-27-24"><a id="__codelineno-27-24" name="__codelineno-27-24" href="#__codelineno-27-24"></a>        <span class="n">total</span><span class="p">:</span> <span class="n">totalData</span><span class="p">,</span>
</span><span id="__span-27-25"><a id="__codelineno-27-25" name="__codelineno-27-25" href="#__codelineno-27-25"></a>        <span class="n">page</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span>
</span><span id="__span-27-26"><a id="__codelineno-27-26" name="__codelineno-27-26" href="#__codelineno-27-26"></a>        <span class="n">pageSize</span><span class="p">:</span> <span class="n">pageSize</span><span class="p">,</span>
</span><span id="__span-27-27"><a id="__codelineno-27-27" name="__codelineno-27-27" href="#__codelineno-27-27"></a>      <span class="p">},</span>
</span><span id="__span-27-28"><a id="__codelineno-27-28" name="__codelineno-27-28" href="#__codelineno-27-28"></a>    <span class="p">};</span>
</span><span id="__span-27-29"><a id="__codelineno-27-29" name="__codelineno-27-29" href="#__codelineno-27-29"></a>  <span class="p">}</span>
</span><span id="__span-27-30"><a id="__codelineno-27-30" name="__codelineno-27-30" href="#__codelineno-27-30"></a><span class="p">}</span>
</span><span id="__span-27-31"><a id="__codelineno-27-31" name="__codelineno-27-31" href="#__codelineno-27-31"></a>
</span><span id="__span-27-32"><a id="__codelineno-27-32" name="__codelineno-27-32" href="#__codelineno-27-32"></a><span class="n">export</span> <span class="n">default</span> <span class="n">BaseResponse</span><span class="p">;</span>
</span></code></pre></div>
<p>Kemudian class tersebut kita extend pada book.service.ts</p>
<p><strong>book.service.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="kn">import</span> <span class="p">{</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>  <span class="n">HttpException</span><span class="p">,</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>  <span class="n">HttpStatus</span><span class="p">,</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>  <span class="n">Injectable</span><span class="p">,</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>  <span class="n">NotFoundException</span><span class="p">,</span>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@nestjs/common&#39;</span><span class="p">;</span>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">ResponsePagination</span><span class="p">,</span> <span class="n">ResponseSuccess</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/interface/response&#39;</span><span class="p">;</span>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">CreateBookDto</span><span class="p">,</span> <span class="n">FindBookDto</span><span class="p">,</span> <span class="n">UpdateBookDto</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./book.dto&#39;</span><span class="p">;</span>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">InjectRepository</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@nestjs/typeorm&#39;</span><span class="p">;</span>
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">Book</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./book.entity&#39;</span><span class="p">;</span>
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a><span class="kn">import</span> <span class="p">{</span> <span class="n">Between</span><span class="p">,</span> <span class="n">Like</span><span class="p">,</span> <span class="n">Repository</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;typeorm&#39;</span><span class="p">;</span>
</span><span id="__span-28-12"><a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a><span class="kn">import</span> <span class="nn">BaseResponse</span> <span class="kn">from</span> <span class="s1">&#39;src/utils/response/base.response&#39;</span><span class="p">;</span> <span class="o">//</span><span class="kn">import</span> <span class="nn">class</span> <span class="n">Base</span> <span class="n">Response</span>
</span><span id="__span-28-13"><a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a>
</span><span id="__span-28-14"><a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a><span class="nd">@Injectable</span><span class="p">()</span>
</span><span id="__span-28-15"><a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a><span class="n">export</span> <span class="k">class</span> <span class="nc">BookService</span> <span class="n">extends</span> <span class="n">BaseResponse</span> <span class="p">{</span> <span class="o">//</span><span class="n">extend</span> <span class="k">class</span> <span class="nc">BaseResponse</span>
</span><span id="__span-28-16"><a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a>  <span class="n">constructor</span><span class="p">(</span>
</span><span id="__span-28-17"><a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a>    <span class="nd">@InjectRepository</span><span class="p">(</span><span class="n">Book</span><span class="p">)</span> <span class="n">private</span> <span class="n">readonly</span> <span class="n">bookRepository</span><span class="p">:</span> <span class="n">Repository</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-28-18"><a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a>  <span class="p">)</span> <span class="p">{</span>
</span><span id="__span-28-19"><a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a>    <span class="nb">super</span><span class="p">();</span> <span class="o">//</span> <span class="n">karena</span> <span class="n">BookService</span> <span class="n">menjadi</span> <span class="n">sub</span> <span class="k">class</span> <span class="nc">dari</span> <span class="n">BaseResponse</span> <span class="n">maka</span> <span class="n">harus</span> <span class="n">diberkan</span> <span class="nb">super</span><span class="p">()</span>
</span><span id="__span-28-20"><a id="__codelineno-28-20" name="__codelineno-28-20" href="#__codelineno-28-20"></a>  <span class="p">}</span>
</span><span id="__span-28-21"><a id="__codelineno-28-21" name="__codelineno-28-21" href="#__codelineno-28-21"></a>
</span><span id="__span-28-22"><a id="__codelineno-28-22" name="__codelineno-28-22" href="#__codelineno-28-22"></a> <span class="o">...</span>
</span><span id="__span-28-23"><a id="__codelineno-28-23" name="__codelineno-28-23" href="#__codelineno-28-23"></a>
</span><span id="__span-28-24"><a id="__codelineno-28-24" name="__codelineno-28-24" href="#__codelineno-28-24"></a><span class="p">}</span>
</span></code></pre></div>
<p>Setelah kita extend BaseResponse selanjutkan kita impelentasikan pada return setiap method service di book.service.ts</p>
<p><strong>book.service.ts</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="k">async</span> <span class="n">getAllBooks</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="n">FindBookDto</span><span class="p">):</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">ResponsePagination</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>    <span class="n">const</span> <span class="p">{</span> <span class="n">page</span><span class="p">,</span> <span class="n">pageSize</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">author</span><span class="p">,</span> <span class="n">from_year</span><span class="p">,</span> <span class="n">to_year</span> <span class="p">}</span> <span class="o">=</span> <span class="n">query</span><span class="p">;</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;q&#39;</span><span class="p">,</span> <span class="n">query</span><span class="p">);</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>    <span class="n">const</span> <span class="n">total</span> <span class="o">=</span> <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">count</span><span class="p">();</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>    <span class="n">const</span> <span class="nb">filter</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>      <span class="p">[</span><span class="n">key</span><span class="p">:</span> <span class="n">string</span><span class="p">]:</span> <span class="nb">any</span><span class="p">;</span>
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a>    <span class="p">}</span> <span class="o">=</span> <span class="p">{};</span>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a>
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">title</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-29-12"><a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a>      <span class="nb">filter</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">Like</span><span class="p">(</span><span class="err">`</span><span class="o">%</span><span class="err">$</span><span class="p">{</span><span class="n">title</span><span class="p">}</span><span class="o">%</span><span class="err">`</span><span class="p">);</span>
</span><span id="__span-29-13"><a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a>    <span class="p">}</span>
</span><span id="__span-29-14"><a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">author</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-29-15"><a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a>      <span class="nb">filter</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Like</span><span class="p">(</span><span class="err">`</span><span class="o">%</span><span class="err">$</span><span class="p">{</span><span class="n">author</span><span class="p">}</span><span class="o">%</span><span class="err">`</span><span class="p">);</span>
</span><span id="__span-29-16"><a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a>    <span class="p">}</span>
</span><span id="__span-29-17"><a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a>
</span><span id="__span-29-18"><a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">from_year</span> <span class="o">&amp;&amp;</span> <span class="n">to_year</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-29-19"><a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a>      <span class="nb">filter</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="n">Between</span><span class="p">(</span><span class="n">from_year</span><span class="p">,</span> <span class="n">to_year</span><span class="p">);</span>
</span><span id="__span-29-20"><a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a>    <span class="p">}</span>
</span><span id="__span-29-21"><a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a>
</span><span id="__span-29-22"><a id="__codelineno-29-22" name="__codelineno-29-22" href="#__codelineno-29-22"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">from_year</span> <span class="o">&amp;&amp;</span> <span class="err">!!</span><span class="n">to_year</span> <span class="o">===</span> <span class="n">false</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-29-23"><a id="__codelineno-29-23" name="__codelineno-29-23" href="#__codelineno-29-23"></a>      <span class="nb">filter</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="n">Between</span><span class="p">(</span><span class="n">from_year</span><span class="p">,</span> <span class="n">from_year</span><span class="p">);</span>
</span><span id="__span-29-24"><a id="__codelineno-29-24" name="__codelineno-29-24" href="#__codelineno-29-24"></a>    <span class="p">}</span>
</span><span id="__span-29-25"><a id="__codelineno-29-25" name="__codelineno-29-25" href="#__codelineno-29-25"></a>
</span><span id="__span-29-26"><a id="__codelineno-29-26" name="__codelineno-29-26" href="#__codelineno-29-26"></a>    <span class="n">const</span> <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">find</span><span class="p">({</span>
</span><span id="__span-29-27"><a id="__codelineno-29-27" name="__codelineno-29-27" href="#__codelineno-29-27"></a>      <span class="n">where</span><span class="p">:</span> <span class="nb">filter</span><span class="p">,</span>
</span><span id="__span-29-28"><a id="__codelineno-29-28" name="__codelineno-29-28" href="#__codelineno-29-28"></a>
</span><span id="__span-29-29"><a id="__codelineno-29-29" name="__codelineno-29-29" href="#__codelineno-29-29"></a>      <span class="n">skip</span><span class="p">:</span> <span class="n">limit</span><span class="p">,</span>
</span><span id="__span-29-30"><a id="__codelineno-29-30" name="__codelineno-29-30" href="#__codelineno-29-30"></a>      <span class="n">take</span><span class="p">:</span> <span class="n">pageSize</span><span class="p">,</span>
</span><span id="__span-29-31"><a id="__codelineno-29-31" name="__codelineno-29-31" href="#__codelineno-29-31"></a>    <span class="p">});</span>
</span><span id="__span-29-32"><a id="__codelineno-29-32" name="__codelineno-29-32" href="#__codelineno-29-32"></a>
</span><span id="__span-29-33"><a id="__codelineno-29-33" name="__codelineno-29-33" href="#__codelineno-29-33"></a>    <span class="k">return</span> <span class="n">this</span><span class="o">.</span><span class="n">_pagination</span><span class="p">(</span><span class="s1">&#39;OK&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="n">page</span><span class="p">,</span> <span class="n">pageSize</span><span class="p">);</span> <span class="o">//</span> <span class="n">implementasi</span> <span class="n">method</span> <span class="n">_pagination</span> <span class="n">disini</span>
</span><span id="__span-29-34"><a id="__codelineno-29-34" name="__codelineno-29-34" href="#__codelineno-29-34"></a>  <span class="p">}</span>
</span><span id="__span-29-35"><a id="__codelineno-29-35" name="__codelineno-29-35" href="#__codelineno-29-35"></a>
</span><span id="__span-29-36"><a id="__codelineno-29-36" name="__codelineno-29-36" href="#__codelineno-29-36"></a>  <span class="k">async</span> <span class="n">createBook</span><span class="p">(</span><span class="n">createBookDto</span><span class="p">:</span> <span class="n">CreateBookDto</span><span class="p">):</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">ResponseSuccess</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span id="__span-29-37"><a id="__codelineno-29-37" name="__codelineno-29-37" href="#__codelineno-29-37"></a>    <span class="n">const</span> <span class="p">{</span> <span class="n">title</span><span class="p">,</span> <span class="n">author</span><span class="p">,</span> <span class="n">year</span> <span class="p">}</span> <span class="o">=</span> <span class="n">createBookDto</span><span class="p">;</span>
</span><span id="__span-29-38"><a id="__codelineno-29-38" name="__codelineno-29-38" href="#__codelineno-29-38"></a>
</span><span id="__span-29-39"><a id="__codelineno-29-39" name="__codelineno-29-39" href="#__codelineno-29-39"></a>    <span class="k">try</span> <span class="p">{</span>
</span><span id="__span-29-40"><a id="__codelineno-29-40" name="__codelineno-29-40" href="#__codelineno-29-40"></a>      <span class="k">await</span> <span class="n">this</span><span class="o">.</span><span class="n">bookRepository</span><span class="o">.</span><span class="n">save</span><span class="p">({</span>
</span><span id="__span-29-41"><a id="__codelineno-29-41" name="__codelineno-29-41" href="#__codelineno-29-41"></a>        <span class="n">title</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span>
</span><span id="__span-29-42"><a id="__codelineno-29-42" name="__codelineno-29-42" href="#__codelineno-29-42"></a>        <span class="n">author</span><span class="p">:</span> <span class="n">author</span><span class="p">,</span>
</span><span id="__span-29-43"><a id="__codelineno-29-43" name="__codelineno-29-43" href="#__codelineno-29-43"></a>        <span class="n">year</span><span class="p">:</span> <span class="n">year</span><span class="p">,</span>
</span><span id="__span-29-44"><a id="__codelineno-29-44" name="__codelineno-29-44" href="#__codelineno-29-44"></a>      <span class="p">});</span>
</span><span id="__span-29-45"><a id="__codelineno-29-45" name="__codelineno-29-45" href="#__codelineno-29-45"></a>      <span class="k">return</span> <span class="n">this</span><span class="o">.</span><span class="n">_success</span><span class="p">(</span><span class="s1">&#39;OK&#39;</span><span class="p">);</span> <span class="o">//</span> <span class="n">implementasi</span> <span class="n">method</span> <span class="n">_success</span> <span class="n">disini</span>
</span><span id="__span-29-46"><a id="__codelineno-29-46" name="__codelineno-29-46" href="#__codelineno-29-46"></a>    <span class="p">}</span> <span class="n">catch</span> <span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-29-47"><a id="__codelineno-29-47" name="__codelineno-29-47" href="#__codelineno-29-47"></a>      <span class="n">throw</span> <span class="n">new</span> <span class="n">HttpException</span><span class="p">(</span><span class="s1">&#39;Ada Kesalahan&#39;</span><span class="p">,</span> <span class="n">HttpStatus</span><span class="o">.</span><span class="n">BAD_REQUEST</span><span class="p">);</span>
</span><span id="__span-29-48"><a id="__codelineno-29-48" name="__codelineno-29-48" href="#__codelineno-29-48"></a>    <span class="p">}</span>
</span><span id="__span-29-49"><a id="__codelineno-29-49" name="__codelineno-29-49" href="#__codelineno-29-49"></a>  <span class="p">}</span>
</span></code></pre></div>
<p><code>Pengujian pada Postman create</code></p>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=17nLy24kd9srLq8LOuhe8L2L2GaP5gMsM" /></p>
<p><code>Pengujian pada Postman get all dengan filter</code></p>
<p><img alt="Alt text" src="https://drive.google.com/uc?id=16UbBHGKBiQzhHR7h6HIIjo3t-c2fwOWb" /></p>
<p>Selanjutkan silahkan implementasikan pada method-method lain pada book.service.ts</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2022 <a href="https://github.com/ihsanabuhanifah"  target="_blank" rel="noopener">IHSANABUHANIFAH</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy"], "search": "../../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>